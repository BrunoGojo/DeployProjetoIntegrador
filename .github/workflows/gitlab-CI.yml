# Define as etapas do pipeline
stages:
  - build
  - analyze

# Etapa de Build
build_job:
  stage: build
  script:
    - echo "Copiando arquivos HTML para a pasta de build..."
    - mkdir -p build
    - cp -r *.html build/  # Copia todos os arquivos HTML para a pasta build
  artifacts:  # Define os artefatos a serem salvos
    paths:
      - build/
  rules:
    - if: '$CI_PIPELINE_SOURCE == "push"'
    - if: '$CI_PIPELINE_SOURCE == "merge_request_event"'

# Etapa de An치lise
analyze_job:
  stage: analyze
  script:
    - echo "Analisando a qualidade do c칩digo HTML..."
    - apt-get update && apt-get install -y tidy  # Instala o Tidy para an치lise de HTML
    - tidy -q -e build/*.html  # Executa a an치lise em todos os arquivos HTML da pasta build
  rules:
    - if: '$CI_PIPELINE_SOURCE == "push"'
    - if: '$CI_PIPELINE_SOURCE == "merge_request_event"'
